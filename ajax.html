<!DOCTYPE html>
<html>
<head>
	<title>Documentation of Records</title>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
	<style>
		table,
		th,
		td {
			border: 1px solid black;
		}
	</style>
</head>
<body>
	<form id="form">
		<label for="title">Title:</label>
		<input type="text" id="title" name="title"><br><br>

		<label for="body">Body:</label>
		<textarea id="body" name="body"></textarea><br><br>

		<button type="submit">Submit</button><br>
	</form>

	<table id="table">
		<thead>
			<tr>
				<th>ID</th>
				<th>Title</th>
				<th>Body</th>
				<th>Actions</th>
			</tr>
		</thead>
		<tbody>
		</tbody>
	</table>

	<script>
		$(document).ready(function(){
			function displayDocument(){
				$.ajax({
					url: "https://jsonplaceholder.typicode.com/posts",
					success: function(data){
						$.each(data, function(index, post){
							var row = "<tr><td>"+ post.id +"</td><td>"+ post.title +"</td><td>"+ post.body +"</td><td><button class='deleteBtn' data-id='"+post.id+"'>Delete</button></td></tr>";
							$("#table tbody").append(row);
						});
					}
				});
			}

			displayDocument();

			$("#form").submit(function(event){
				event.preventDefault();

				// var title = $("#title").val();
				// var body = $("#body").val();
                var mergeData = $('#form').serialize();
                console.log(mergeData);


				$.ajax({
					url: "https://jsonplaceholder.typicode.com/posts",
					method: "POST",
                    data:mergeData,
                 
					success: function(data){
						var row = "<tr><td>"+ data.id +"</td><td>"+ data.title +"</td><td>"+ data.body +"</td><td><button class='deleteBtn' data-id='"+data.id+"'>Delete</button></td></tr>";
						$("#table tbody").append(row);
					}
				});
                
                $(this).trigger('reset');

			});

			$(document).on('click', '.deleteBtn', function(){
				var postId = $(this).data('id');
				var row = $(this).closest('tr');


				$.ajax({
					url: "https://jsonplaceholder.typicode.com/posts/" + postId,
					method: "DELETE",
					success: function(){
						row.remove();
					}
				});
			});
		});
	</script>
</body>
</html>